:root{--bg-primary: #ffffff;--bg-secondary: #f5f5f5;--text-primary: #333333;--text-secondary: #2c3e50;--border-color: #3498db;--event-bg: #f8f9fa;--tag-bg: #e3f2fd;--tag-hover: #bbdefb;--link-color: #1976d2;--shadow-color: rgba(0, 0, 0, .1);--primary-color: #4a90e2;--primary-color-dark: #357abd}[data-theme=dark]{--bg-primary: #1a1a1a;--bg-secondary: #2d2d2d;--text-primary: #ffffff;--text-secondary: #e0e0e0;--border-color: #64b5f6;--event-bg: #2d2d2d;--tag-bg: #1a237e;--tag-hover: #283593;--link-color: #90caf9;--shadow-color: rgba(0, 0, 0, .3);--primary-color: #4a90e2;--primary-color-dark: #357abd}body{margin:0;padding:0;overflow-x:hidden;background-color:var(--bg-primary);color:var(--text-primary);transition:background-color .3s ease,color .3s ease}.app{width:100%;margin:0;padding:0 0 2rem;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;box-sizing:border-box}@media (max-width: 768px){.app{padding:0 0 1rem}header h1{font-size:2rem}.date-header{font-size:1.5rem}.topic-header{font-size:1.2rem}.topic-banner{margin:0}.topic-track{padding:0 1rem}main{padding:0 1rem}}header{margin-bottom:2rem;text-align:center}header h1{color:var(--text-primary);font-size:2.5rem;margin:0}.day-group{margin-bottom:3rem}.date-header{color:var(--text-secondary);font-size:1.8rem;margin-bottom:1.5rem;padding-bottom:.5rem;border-bottom:2px solid var(--border-color);cursor:pointer;display:flex;justify-content:space-between;align-items:center}.collapse-icon{font-size:1rem;transition:transform .3s ease}.collapse-icon.collapsed{transform:rotate(-90deg)}.day-content{width:100%;overflow:visible;transition:max-height .3s ease-out,opacity .3s ease-out;opacity:1}.day-content.collapsed{max-height:0;margin:0;padding:0;overflow:hidden;opacity:0;pointer-events:none}.topic-group{margin-bottom:2rem}.topic-header{color:var(--text-secondary);font-size:1.3rem;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid var(--border-color)}.events-list{list-style:none;padding:0;margin:0}.event{margin-bottom:1.5rem;padding:1rem;background-color:var(--event-bg);border-radius:8px;box-shadow:0 2px 4px var(--shadow-color);overflow:hidden}.event-content{display:flex;flex-direction:column;gap:.5rem;width:100%;overflow-wrap:break-word;word-wrap:break-word}.event-body{margin:0;line-height:1.6;color:var(--text-primary);font-size:1rem}.sources,.tags{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.source-link,.tag-link{display:inline;text-decoration:none;font-size:.9rem;transition:background-color .2s}.source-link{color:var(--link-color)}.source-link:hover{text-decoration:none}.source-link:hover span{text-decoration:underline}.tag-link{background-color:var(--tag-bg);color:var(--link-color);padding:.25rem .5rem;margin:.1rem;border-radius:3px}.tag-link:hover{background-color:var(--tag-hover)}.loading{display:flex;justify-content:center;align-items:center;min-height:200px}.error{display:flex;justify-content:center;align-items:center;min-height:100vh;font-size:1.2rem;color:red;padding:20px;text-align:center}.topic-banner{background-color:var(--bg-secondary);padding:0;margin:0;box-shadow:0 1px 3px var(--shadow-color);overflow:hidden}.topic-carousel{position:relative;width:100%;height:32px;overflow:hidden;padding:4px 0;backface-visibility:hidden;transform:translateZ(0);-webkit-font-smoothing:antialiased}.topic-track{display:flex;animation:slide 120s linear infinite;width:fit-content;gap:60px;padding:0 2rem;height:100%;will-change:transform}.topic-slide{flex:0 0 auto;display:flex;align-items:center;justify-content:center;font-size:1.1em;font-weight:500;color:var(--text-primary);padding:0 20px;white-space:pre;min-width:max-content;line-height:1.4;height:100%}@keyframes slide{0%{transform:translate(0)}to{transform:translate(-100%)}}.topic-banner-link{color:var(--text-primary);text-decoration:none;font-size:1.1em;font-weight:500;display:block;transition:color .2s ease}.topic-banner-link:hover{color:var(--link-color)}.topic-slide mark{background-color:#ffeb3b;padding:0 2px;margin:0 2px;border-radius:2px;display:inline-block}main{width:100%;max-width:none;margin:0 auto;padding:0 2rem;box-sizing:border-box}.top-controls{position:absolute;top:40px;right:0;z-index:1000;display:flex;align-items:center;gap:.5rem}.theme-toggle{position:absolute;top:0;right:0;z-index:1000;display:flex;flex-direction:column;align-items:flex-end;gap:.25rem;pointer-events:none;padding:0;margin:0}body.has-banner .theme-toggle{top:40px;padding:0;margin:0}.theme-toggle-main{background-color:var(--bg-secondary);border:none;color:var(--text-primary);cursor:pointer;padding:.25rem .5rem;border-radius:8px;transition:all .2s ease;font-size:.9rem;min-width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 4px var(--shadow-color);pointer-events:auto}.theme-options{display:flex;gap:.25rem;background-color:var(--bg-secondary);padding:.25rem;border-radius:8px;box-shadow:0 2px 4px var(--shadow-color);transform-origin:top right;transform:scale(0);opacity:0;transition:all .2s ease;pointer-events:none}.theme-toggle.expanded .theme-options{transform:scale(1);opacity:1;pointer-events:auto}.theme-options button{background:none;border:none;color:var(--text-primary);cursor:pointer;padding:.25rem .5rem;border-radius:4px;transition:background-color .2s ease;font-size:.9rem;min-width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;pointer-events:auto}.theme-options button:hover{background-color:var(--event-bg)}.theme-options button.active{background-color:var(--border-color);color:var(--bg-primary)}.on-this-day-section{width:100%;max-width:none;margin:0 auto;padding:0 2rem;box-sizing:border-box;overflow:visible}.on-this-day-section .date-header{margin:0}.on-this-day-section .day-content{width:100%;max-width:none;overflow:visible}.order-toggle{display:flex;justify-content:flex-end;gap:1rem;margin:0;padding:0}.day-content.collapsed .order-toggle{opacity:0;pointer-events:none}.order-toggle-btn{background-color:var(--bg-secondary);border:none;color:var(--text-primary);cursor:pointer;padding:.5rem;border-radius:8px;transition:all .2s ease;font-size:1.2rem;width:2.5rem;height:2.5rem;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 4px var(--shadow-color)}.order-toggle-btn:hover:not(:disabled){background-color:var(--event-bg)}.order-toggle-btn.disabled{opacity:.5;cursor:not-allowed;background-color:var(--bg-secondary)}.order-toggle-btn.active{background-color:var(--border-color);color:var(--bg-primary)}.main-nav{display:flex;justify-content:center;gap:1rem;padding:.5rem 2rem;background-color:transparent;border-bottom:1px solid var(--border-color);align-items:center;height:40px;margin-bottom:0}.nav-button{background:none;border:none;color:var(--text-primary);font-size:1rem;padding:.25rem 1rem;cursor:pointer;border-radius:4px;transition:all .2s ease;position:relative;height:100%;display:flex;align-items:center}.nav-button:hover{background-color:var(--event-bg)}.nav-button.active{color:var(--border-color);font-weight:500}.nav-button.active:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:2px;background-color:var(--border-color)}.nav-dropdown-container{position:relative;height:100%;display:flex;align-items:center}.nav-dropdown-menu{position:absolute;top:100%;right:0;background-color:var(--bg-primary);border:1px solid var(--border-color);border-radius:4px;box-shadow:0 2px 8px #0000001a;min-width:200px;z-index:1000;margin-top:.5rem}.nav-dropdown-item{display:block;width:100%;padding:8px 16px;border:none;background:none;text-align:center;cursor:pointer;font-size:1rem;color:var(--text-primary);box-sizing:border-box}.nav-dropdown-item:hover{background-color:var(--event-bg)}.loading-overlay{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;z-index:1001}.loading{display:flex;justify-content:center;align-items:center}.loading:after{content:"";width:40px;height:40px;border:4px solid var(--bg-secondary);border-top-color:var(--text-primary);border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.loading-container{display:flex;justify-content:center;align-items:center;min-height:200px;width:100%;padding:2rem;box-sizing:border-box}.dialog-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.dialog-content{background:var(--bg-primary);padding:20px;border-radius:8px;box-shadow:0 2px 8px #0003;width:90%;max-width:400px}.dialog-content h3{margin:0 0 20px;color:var(--text-primary);text-align:center}.dialog-buttons{display:flex;justify-content:center;gap:10px}.dialog-buttons button{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .2s}.dialog-buttons button:first-child{background-color:var(--primary-color);color:#fff}.dialog-buttons button:first-child:hover{background-color:var(--primary-color-dark)}.dialog-buttons button:last-child{background-color:var(--bg-secondary);color:var(--text-primary)}.dialog-buttons button:last-child:hover{background-color:var(--event-bg)}.dialog-content input{font-size:16px}.on-this-day-container{max-width:1200px;margin:0 auto;padding:0 2rem}.on-this-day-container h1{color:var(--text-primary);font-size:2rem;margin-bottom:2rem;text-align:center}.on-this-day-events{display:flex;flex-direction:column;gap:1rem;width:100%;max-width:none;overflow:visible}.on-this-day-card{background-color:var(--event-bg);border-radius:8px;padding:1rem;box-shadow:0 2px 4px var(--shadow-color);width:100%;box-sizing:border-box;max-width:none;overflow:visible}.on-this-day-content{display:flex;flex-direction:column;gap:.5rem;width:100%;max-width:none;overflow:visible}.on-this-day-header{display:flex;align-items:center;gap:1rem}.on-this-day-card h2{color:var(--text-secondary);font-size:1.2rem;margin:0;line-height:1.2rem}.on-this-day-card p{color:var(--text-primary);margin:0;line-height:1.5;width:100%;word-wrap:break-word;overflow-wrap:break-word;white-space:normal;text-overflow:clip;overflow:visible;max-width:none;display:block}.on-this-day-image{width:1.2rem;height:1.2rem;object-fit:cover;border-radius:4px;flex-shrink:0}.gk-word{background-color:#ade5f88c;cursor:pointer}.cet4-word{background-color:#98eee68c;cursor:pointer}.cet6-word{background-color:#d5e88e8c;cursor:pointer}.cet8-word{background-color:#f0e39c8c;cursor:pointer}.yjs-word{background-color:#ffd5a88c;cursor:pointer}.ielts-word{background-color:#bad0ff8c;cursor:pointer}.toefl-word{background-color:#e4cfff8c;cursor:pointer}.word-popup{position:absolute;background:#000000e6;color:#fff;padding:6px 10px;border-radius:3px;font-size:12px;max-width:250px;box-shadow:0 2px 4px #0003;z-index:1000}.word-popup-content{color:#fff;line-height:1.3;display:flex;align-items:center;gap:8px}.study-list-btn{background:none;border:none;color:#fff;cursor:pointer;font-size:16px;padding:2px 4px;transition:transform .2s}.study-list-btn:hover:not(:disabled){transform:scale(1.2)}.study-list-btn:disabled{cursor:default;opacity:.7}.study-list-btn.in-study-list{color:gold}.study-list-message{position:absolute;top:-30px;left:50%;transform:translate(-50%);padding:4px 8px;border-radius:4px;font-size:12px;white-space:nowrap;animation:fadeInOut 3s ease-in-out}.study-list-message.success{background-color:#2ecc71e6;color:#fff}.study-list-message.error{background-color:#e74c3ce6;color:#fff}@keyframes fadeInOut{0%{opacity:0}10%{opacity:1}90%{opacity:1}to{opacity:0}}.loading-active{position:relative;overflow:hidden}.checkmark-container{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1001;display:flex;justify-content:center;align-items:center;pointer-events:none}.checkmark{font-size:48px}.retry-dialog{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--bg-primary);padding:20px;border-radius:8px;box-shadow:0 2px 8px #0003;z-index:1000;text-align:center;min-width:280px;max-width:90%}.retry-dialog p{margin:0 0 20px;color:var(--text-primary)}.retry-dialog button{margin:0 10px;padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .2s;min-width:100px;height:36px;display:inline-flex;align-items:center;justify-content:center}.retry-dialog button:first-child{background-color:var(--primary-color);color:#fff}.retry-dialog button:first-child:hover{background-color:var(--primary-color-dark)}.retry-dialog button:last-child{background-color:var(--bg-secondary);color:var(--text-primary)}.retry-dialog button:last-child:hover{background-color:var(--event-bg)}.error-word{color:#f44}.epub-upload{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;min-height:200px;margin:2rem 0}.upload-button{padding:.75rem 1.5rem;font-size:1rem;background-color:var(--primary-color);color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s}.upload-button:hover{background-color:var(--primary-color-dark)}.upload-button.read.downloading{opacity:.7;cursor:not-allowed;background-color:var(--primary-color)}.upload-button.read.downloading:hover{background-color:var(--primary-color)}.upload-hint{margin-top:1rem;color:var(--text-secondary);font-size:.9rem}.epub-container{width:100%;max-width:none;margin:0 auto;box-sizing:border-box;overflow:visible;display:flex}.epub-toc{width:300px;min-width:300px;max-width:300px;padding:20px 0 100px;background-color:var(--background-secondary);border-right:1px solid var(--border-color);overflow-y:auto;height:100%;box-sizing:border-box}.epub-toc h2{margin-top:0;margin-bottom:20px;font-size:1.2em;color:#333;padding-bottom:10px;border-bottom:1px solid #ddd;padding-left:20px}.toc-item{margin-bottom:4px}.toc-link{padding:8px 20px;cursor:pointer;border-radius:4px;transition:background-color .2s;display:flex;align-items:center;text-decoration:none;color:#333;-webkit-user-select:none;user-select:none;gap:8px}.toc-link:hover{background-color:#e0e0e0}.toc-expand-icon{display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;font-size:12px;color:#666;transition:transform .2s;margin-right:4px}.toc-children{border-left:1px solid #ddd;margin-top:4px}.toc-item[style*="marginLeft: 0px"] .toc-link,.toc-item[style*="marginLeft: 20px"] .toc-link,.toc-item[style*="marginLeft: 40px"] .toc-link,.toc-item[style*="marginLeft: 60px"] .toc-link{font-weight:400;color:#333}.toc-link.has-children{font-weight:500}.toc-title{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.epub-content{max-width:700px;margin:0 auto;width:100%;overflow:visible;padding-bottom:4rem;box-sizing:border-box}.epub-section{margin-bottom:1.5rem;padding:1rem;background-color:var(--event-bg);border-radius:8px;box-shadow:0 2px 4px var(--shadow-color);overflow:visible}.epub-section p{margin:0;line-height:1.6;color:var(--text-primary);font-size:1rem}.epub-section img{max-width:100%;height:auto;margin:1rem 0;border-radius:4px}.toc-toggle{position:fixed;bottom:20px;right:20px;z-index:1001;padding:12px 20px;border-radius:50px;box-shadow:0 2px 8px #0003;background-color:var(--primary-color);color:#fff;font-weight:500;border:none;cursor:pointer;transition:background-color .2s}.toc-toggle:hover{background-color:var(--primary-color-dark)}@media (max-width: 768px){.epub-toc{position:fixed;top:0;left:0;height:100%;z-index:1000;background-color:var(--bg-primary);border-right:none;box-shadow:2px 0 8px #0000001a;padding:20px 0 100px;box-sizing:border-box;width:100%;min-width:0;max-width:none}.epub-toc h2{color:var(--text-primary);border-bottom-color:var(--border-color)}.toc-link{color:var(--text-primary)}.toc-link:hover{background-color:var(--bg-secondary)}.toc-children{margin-left:0;padding-left:0}.epub-content{padding-left:0}.toc-toggle{position:fixed;bottom:20px;right:20px;z-index:1001;padding:12px 20px;border-radius:50px;box-shadow:0 2px 8px #0003;background-color:var(--primary-color);color:#fff;font-weight:500}.epub-viewer{padding:0 .5rem}}@media (max-width: 1100px){.epub-content{padding-left:16px}}.epub-chapter-content{line-height:1.6}.epub-chapter-content img{max-width:100%;height:auto;display:block;margin:1rem auto}.epub-cover{max-width:100%;height:auto;display:block;margin:0 auto;box-shadow:0 4px 8px #0000001a}@media (max-width: 768px){.epub-chapter-content img,.epub-cover{max-width:100%;height:auto}}.epub-viewer{width:100%;max-width:none;margin:0 auto;box-sizing:border-box;overflow:visible;padding:0 1rem}
